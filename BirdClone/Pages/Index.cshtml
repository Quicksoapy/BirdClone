@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

@if (!string.IsNullOrEmpty(Request.Cookies["UserId"]))
{
    <div class="text-center">
        <h1 class="display-7">Hi @Request.Cookies["Username"]!</h1>
    </div>
    <form method="post">
        <label>Message: </label><input type="text" asp-for="MessageModel.Content"/>
        <button type="submit">Submit</button>
    </form>
}
else
{   
    <div class="text-center">
        <h1 class="display-4">Welcome</h1>
    </div>
}

<table class="table">
    <thead>
    <tr>
        <th scope="col"></th>
        <th scope="col">Username</th>
        <th scope="col">Content</th>
        <th scope="col">Time</th>
    </tr>
    </thead>
    <tbody>
@foreach (var message in Model.Messages)
{
    <tr>
        <th scope="row"></th>
        <td>@message.Username</td>
        <td>@message.Content</td>
        <td>@message.CreatedOn</td>
    </tr>
}
    </tbody>
</table>